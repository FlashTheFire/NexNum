# ===========================================
# NexNum Environment Variables
# ===========================================

# Supabase PostgreSQL
# Get from: Supabase Dashboard > Settings > Database > Connection string
DATABASE_URL="postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:6543/postgres?pgbouncer=true"
DIRECT_URL="postgresql://postgres.[PROJECT-REF]:[PASSWORD]@aws-0-[REGION].pooler.supabase.com:5432/postgres"

# Local Redis (Standard Protocol via Docker)
# Format: redis://[:password]@host:port
REDIS_URL="redis://:dev_redis_pass@localhost:6379"

# Meilisearch
# Local dev: http://localhost:7700
# Production: Your Oracle VM IP
MEILISEARCH_HOST="http://localhost:7700"
MEILISEARCH_API_KEY="dev_master_key"

# Telegram Notifications
TELEGRAM_BOT_TOKEN="123456789:ABCdefGHIjklMNOpqrSTUvwxYZ"
TELEGRAM_ADMIN_CHANNEL="-1001234567890"

# JWT Secret (generate with: openssl rand -base64 32)
JWT_SECRET="your-super-secret-jwt-key-change-this"
JWT_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# SMS Provider Configuration
# Options: 5sim | herosms | smsbower | grizzlysms | onlinesim
SMS_PROVIDER="herosms"

# Provider API Keys (only needed when using that provider)
FIVESIM_API_KEY=""
FIVESIM_API_URL="https://5sim.net/v1"

HERO_SMS_API_KEY=""
HERO_SMS_API_URL="https://herosms.one/stubs/handler_api.php"

SMSBOWER_API_KEY=""
SMSBOWER_API_URL="https://smsbower.com/api"

GRIZZLYSMS_API_KEY=""
GRIZZLYSMS_API_URL="https://api.grizzlysms.com/stubs/handler_api.php"

ONLINESIM_API_KEY=""
ONLINESIM_API_URL="https://onlinesim.io/api"

# App Settings
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Sentry Error Monitoring (Optional)
# Get from: https://sentry.io/ > Project Settings > Client Keys
SENTRY_DSN=""
NEXT_PUBLIC_SENTRY_DSN=""
SENTRY_ORG=""
SENTRY_PROJECT=""
SENTRY_AUTH_TOKEN=""

# Google Gemini AI (for Provider Config Assistant)
# Supports multiple keys (comma-separated) for automatic rate-limit rotation
GEMINI_API_KEYS="key1,key2,key3"

# Email - SMTP (Gmail or others)
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_USER="your-email@gmail.com"
SMTP_PASS="your-app-password"
FROM_EMAIL='"NexNum" <noreply@nexnum.com>'

# Web Push (VAPID)
# Generate via: npx web-push generate-vapid-keys
NEXT_PUBLIC_VAPID_PUBLIC_KEY=""
VAPID_PRIVATE_KEY=""
VAPID_SUBJECT="mailto:support@yourdomain.com"

# Cron Security (Optional for Internal Scheduler, but used for API endpoints)
CRON_SECRET="your-cron-secret-key"

# ===========================================
# Centralized Configuration (Production)
# ===========================================

# ── Limits ───────────────────────────────
DAILY_SPEND_LIMIT="100"
MAX_PURCHASE_AMOUNT="50"
MIN_PURCHASE_AMOUNT="0.01"
MAX_ACTIVE_NUMBERS="10"
MAX_SMS_PER_ACTIVATION="5"

# ── Timeouts (milliseconds) ──────────────
RESERVATION_TTL_MS="300000"
MIN_REFUND_AGE_MS="120000"
STUCK_THRESHOLD_MS="600000"
PROVIDER_TIMEOUT_MS="15000"
NUMBER_LIFETIME_MS="1200000"
GRACE_PERIOD_MS="60000"

# ── Workers ──────────────────────────────
WORKER_BATCH_SIZE="50"
WORKER_CONCURRENCY="10"
POLL_INTERVAL_MS="30000"
RECONCILE_INTERVAL_MS="60000"
CLEANUP_INTERVAL_MS="120000"

# ── Feature Flags ────────────────────────
ENABLE_MOCK_PROVIDER="false"
DEBUG="false"
MAINTENANCE_MODE="false"
ENABLE_SMS_FINGERPRINTING="true"
ENABLE_HEALTH_MONITORING="true"

# ── Pricing ──────────────────────────────
DEFAULT_MARKUP_PERCENT="20"
MIN_PRICE_USD="0.10"
MAX_PRICE_USD="50.00"
PRICE_PRECISION="2"

# ── Security ─────────────────────────────
RATE_LIMIT_WINDOW_MS="60000"
RATE_LIMIT_MAX="100"
ENCRYPTION_KEY=""
CSRF_SECRET=""
FINGERPRINT_SALT="change-this-to-rotate-all-device-fingerprints"
TRUST_PROXY="true"

# CAPTCHA Protection (Universal Adapter)
# Recommendation: hCaptcha (100,000 free verifications/mo + Revenue Sharing)
# Alternative: reCAPTCHA (10,000 free verifications/mo)

HCAPTCHA_SECRET=""
NEXT_PUBLIC_HCAPTCHA_SITEKEY=""

RECAPTCHA_SECRET=""
NEXT_PUBLIC_RECAPTCHA_SITEKEY=""

# ── Monitoring & Alerts ───────────────────
# Used for Alertmanager webhook authentication
ALERT_WEBHOOK_SECRET="change-this-to-a-secure-random-string"

# ===========================================
# Production Readiness Check (AWS EC2)
# ===========================================
# 1. ENCRYPTION_KEY: Must be 32 chars
# 2. JWT_SECRET: Must be 32 chars
# 3. ALERT_WEBHOOK_SECRET: Hardened comparison
# 4. SWAP: Ensure /swapfile is active (see deploy-aws.sh)
# ===========================================
